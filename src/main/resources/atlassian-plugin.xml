<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="Mail.Ru Calendar" plugins-version="2">

    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}" />
        <param name="atlassian-data-center-compatible">true</param>
        <param name="atlassian-licensing-enabled">true</param>
    </plugin-info>

    <gadget key="mailru-calendar-gadget" location="ru/mail/jira/plugins/calendar/gadget/calendar-gadget.xml"/>

    <resource type="i18n" name="i18n" location="ru.mail.jira.plugins.calendar.mailrucalendar"/>

    <rest key="mailrucalendar-rest" path="/mailrucalendar" version="1.0" />

    <ao key="ao-entities">
        <entity>ru.mail.jira.plugins.calendar.model.Calendar</entity>
        <entity>ru.mail.jira.plugins.calendar.model.UserCalendar</entity>
        <entity>ru.mail.jira.plugins.calendar.model.UserData</entity>
        <entity>ru.mail.jira.plugins.calendar.model.Permission</entity>
        <entity>ru.mail.jira.plugins.calendar.model.Event</entity>
        <entity>ru.mail.jira.plugins.calendar.model.EventType</entity>
        <entity>ru.mail.jira.plugins.calendar.model.EventTypeReminder</entity>
        <entity>ru.mail.jira.plugins.calendar.model.QuickFilter</entity>
        <entity>ru.mail.jira.plugins.calendar.model.FavouriteQuickFilter</entity>
        <entity>ru.mail.jira.plugins.calendar.model.GanttLink</entity>
        <entity>ru.mail.jira.plugins.calendar.schedule.model.Schedule</entity>
        <entity>ru.mail.jira.plugins.calendar.configuration.NonWorkingDay</entity>
        <entity>ru.mail.jira.plugins.calendar.model.gantt.GanttTeam</entity>
        <entity>ru.mail.jira.plugins.calendar.model.gantt.GanttUser</entity>

        <upgradeTask>ru.mail.jira.plugins.calendar.upgrades.v3.Version3UpgradeTask</upgradeTask>
        <upgradeTask>ru.mail.jira.plugins.calendar.upgrades.v4.Version4UpgradeTask</upgradeTask>
        <upgradeTask>ru.mail.jira.plugins.calendar.upgrades.v5.Version5UpgradeTask</upgradeTask>
    </ao>

    <webwork1 key="calendar-action" class="java.lang.Object" roles-required="use">
        <actions>
            <action name="ru.mail.jira.plugins.calendar.MailRuCalendarAction" alias="MailRuCalendar">
                <view name="success">/ru/mail/jira/plugins/calendar/view.vm</view>
            </action>
        </actions>
    </webwork1>

    <web-resource key="mailru-calendar-soy-templates">
        <dependency>com.atlassian.soy.soy-template-plugin:soy-deps</dependency>
        <transformation extension="soy">
            <transformer key="soyTransformer"/>
        </transformation>
        <resource type="download" name="templates.soy.js" location="ru/mail/jira/plugins/calendar/templates.soy"/>
        <resource type="download" name="calendar-dialog.soy.js" location="ru/mail/jira/plugins/calendar/dialog/calendar-dialog.soy"/>
        <resource type="download" name="confirm-dialog.soy.js" location="ru/mail/jira/plugins/calendar/dialog/confirm-dialog.soy"/>
        <resource type="download" name="edit-type-dialog.soy.js" location="ru/mail/jira/plugins/calendar/dialog/edit-type-dialog.soy"/>
        <resource type="download" name="feed-dialog.soy.js" location="ru/mail/jira/plugins/calendar/dialog/feed-dialog.soy"/>
        <resource type="download" name="import-dialog.soy.js" location="ru/mail/jira/plugins/calendar/dialog/import-dialog.soy"/>
        <resource type="download" name="custom-event-dialog.soy.js" location="ru/mail/jira/plugins/calendar/dialog/custom-event-dialog.soy"/>
        <resource type="download" name="quick-filter-dialog.soy.js" location="ru/mail/jira/plugins/calendar/dialog/quick-filter-dialog.soy"/>
    </web-resource>

    <web-resource key="calendar-gadget-resources">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>
        <dependency>jira.webresources:almond</dependency>
        <dependency>jira.webresources:util-lite</dependency>
        <dependency>jira.webresources:jquery</dependency>
        <dependency>jira.webresources:momentjs</dependency>
        <dependency>jira.webresources:jira-formatter</dependency>
        <dependency>jira.webresources:autocomplete</dependency>

        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.auiplugin:aui-select2</dependency>
        <dependency>jira.webresources:jquery-livestamp</dependency>
        <dependency>ru.mail.jira.plugins.mailrucal:mailru-calendar-soy-templates</dependency>

        <resource type="download" name="calendar-img/" location="ru/mail/jira/plugins/calendar/img"/>

        <resource type="download" name="intro-screenshot.png" location="ru/mail/jira/plugins/calendar/gadget/intro-screenshot.png"/>
        <resource type="download" name="intro-thumb.png" location="ru/mail/jira/plugins/calendar/gadget/intro-thumb.png"/>

        <resource type="download" name="moment.js" location="ru/mail/jira/plugins/calendar/fullcalendar/moment.js"/>
        <resource type="download" name="moment-timezone-with-data.js" location="ru/mail/jira/plugins/calendar/fullcalendar/moment-timezone-with-data.js"/>
        <resource type="download" name="clipboard.js" location="ru/mail/jira/plugins/calendar/libs/clipboard-min.js"/>

        <resource type="download" name="vis.css" location="ru/mail/jira/plugins/calendar/timeline/vis.css"/>
        <resource type="download" name="vis-timeline.js" location="ru/mail/jira/plugins/calendar/timeline/vis-timeline.js"/>
        <resource type="download" name="img/" location="ru/mail/jira/plugins/calendar/timeline/img"/>

        <resource type="download" name="fullcalendar.css" location="ru/mail/jira/plugins/calendar/fullcalendar/fullcalendar.css"/>
        <resource type="download" name="fullcalendar.js" location="ru/mail/jira/plugins/calendar/fullcalendar/fullcalendar.js"/>
        <resource type="download" name="fullcalendar-lang-all.js" location="ru/mail/jira/plugins/calendar/fullcalendar/fullcalendar-lang-all.js"/>

        <resource type="download" name="preferences.js" location="ru/mail/jira/plugins/calendar/preferences.js"/>
        <resource type="download" name="reminder.js" location="ru/mail/jira/plugins/calendar/reminder.js"/>
        <resource type="download" name="recurrence.js" location="ru/mail/jira/plugins/calendar/recurrence.js"/>
        <resource type="download" name="edit-type-dialog.js" location="ru/mail/jira/plugins/calendar/dialog/edit-type-dialog.js"/>
        <resource type="download" name="timeline-view.js" location="ru/mail/jira/plugins/calendar/timeline-view.js"/>
        <resource type="download" name="calendar-view.js" location="ru/mail/jira/plugins/calendar/calendar-view.js"/>
        <resource type="download" name="view.css" location="ru/mail/jira/plugins/calendar/view.css"/>
        <resource type="download" name="calendar-gadget.css" location="ru/mail/jira/plugins/calendar/gadget/calendar-gadget.css"/>
        <resource type="download" name="calendar-gadget.js" location="ru/mail/jira/plugins/calendar/gadget/calendar-gadget.js"/>
    </web-resource>

    <web-resource key="calendar-resources">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.auiplugin:aui-sidebar</dependency>
        <dependency>com.atlassian.auiplugin:aui-dropdown2</dependency>
        <dependency>com.atlassian.auiplugin:dialog2</dependency>
        <dependency>com.atlassian.auiplugin:aui-inline-dialog2</dependency>
        <dependency>com.atlassian.auiplugin:aui-flag</dependency>
        <dependency>com.atlassian.auiplugin:aui-select2</dependency>
        <dependency>com.atlassian.auiplugin:aui-date-picker</dependency>
        <dependency>com.atlassian.auiplugin:aui-banner</dependency>
        <dependency>jira.webresources:jquery-livestamp</dependency>
        <dependency>com.atlassian.auiplugin:aui-experimental-tooltips</dependency>
        <dependency>jira.webresources:jqlautocomplete</dependency>
        <dependency>ru.mail.jira.plugins.mailrucal:mailru-calendar-soy-templates</dependency>

        <resource type="download" name="calendar-img/" location="ru/mail/jira/plugins/calendar/img"/>

        <resource type="download" name="moment.js" location="ru/mail/jira/plugins/calendar/fullcalendar/moment.js"/>
        <resource type="download" name="moment-timezone-with-data.js" location="ru/mail/jira/plugins/calendar/fullcalendar/moment-timezone-with-data.js"/>
        <resource type="download" name="clipboard.js" location="ru/mail/jira/plugins/calendar/libs/clipboard-min.js"/>

        <resource type="download" name="vis.css" location="ru/mail/jira/plugins/calendar/timeline/vis.css"/>
        <resource type="download" name="vis-timeline.js" location="ru/mail/jira/plugins/calendar/timeline/vis-timeline.js"/>
        <resource type="download" name="img/" location="ru/mail/jira/plugins/calendar/timeline/img"/>

        <resource type="download" name="fullcalendar.css" location="ru/mail/jira/plugins/calendar/fullcalendar/fullcalendar.css"/>
        <resource type="download" name="fullcalendar.js" location="ru/mail/jira/plugins/calendar/fullcalendar/fullcalendar.js"/>
        <resource type="download" name="fullcalendar-lang-all.js" location="ru/mail/jira/plugins/calendar/fullcalendar/fullcalendar-lang-all.js"/>

        <resource type="download" name="preferences.js" location="ru/mail/jira/plugins/calendar/preferences.js"/>
        <resource type="download" name="reminder.js" location="ru/mail/jira/plugins/calendar/reminder.js"/>
        <resource type="download" name="recurrence.js" location="ru/mail/jira/plugins/calendar/recurrence.js"/>
        <resource type="download" name="calendar-dialog.js" location="ru/mail/jira/plugins/calendar/dialog/calendar-dialog.js"/>
        <resource type="download" name="feed-dialog.js" location="ru/mail/jira/plugins/calendar/dialog/feed-dialog.js"/>
        <resource type="download" name="import-dialog.js" location="ru/mail/jira/plugins/calendar/dialog/import-dialog.js"/>
        <resource type="download" name="confirm-dialog.js" location="ru/mail/jira/plugins/calendar/dialog/confirm-dialog.js"/>
        <resource type="download" name="edit-type-dialog.js" location="ru/mail/jira/plugins/calendar/dialog/edit-type-dialog.js"/>
        <resource type="download" name="custom-event-dialog.js" location="ru/mail/jira/plugins/calendar/dialog/custom-event-dialog.js"/>
        <resource type="download" name="quick-filter-dialog.js" location="ru/mail/jira/plugins/calendar/dialog/quick-filter-dialog.js"/>
        <resource type="download" name="feedback-flag.js" location="ru/mail/jira/plugins/calendar/feedback-flag.js"/>

        <resource type="download" name="timeline-view.js" location="ru/mail/jira/plugins/calendar/timeline-view.js"/>
        <resource type="download" name="calendar-view.js" location="ru/mail/jira/plugins/calendar/calendar-view.js"/>
        <resource type="download" name="view.css" location="ru/mail/jira/plugins/calendar/view.css"/>
        <resource type="download" name="view.js" location="ru/mail/jira/plugins/calendar/view.js"/>

        <resource type="download" name="JQLAutoComplete.js" location="ru/mail/jira/plugins/calendar/utils/JQLAutoComplete.js" />
    </web-resource>

    <web-item key="calendar-link" name="Calendar Link" section="system.top.navigation.bar" weight="47">
        <condition class="com.atlassian.jira.plugin.webfragment.conditions.UserLoggedInCondition"/>
        <label key="ru.mail.jira.plugins.calendar.linkTitleShort"/>
        <tooltip key="ru.mail.jira.plugins.calendar.linkTitle"/>
        <link linkId="amplugin-simple-cal-link-section">/secure/MailRuCalendar.jspa</link>
    </web-item>

    <web-item key="set-my-jira-home-mailru-calendar" name="Set my JIRA home Calendar" i18n-name-key="ru.mail.jira.plugins.calendar.linkTitle" section="system.user.options/set_my_jira_home" weight="77">
        <tooltip key="ru.mail.jira.plugins.calendar.linkDescription"/>
        <label key="ru.mail.jira.plugins.calendar.linkTitleShort" />
        <link linkId="set-my-jira-home-mailru-calendar-link">/secure/MailRuCalendar.jspa</link>
    </web-item>

    <servlet key="calendar-view-sevlet" class="ru.mail.jira.plugins.calendar.MailRuCalendarServlet">
        <url-pattern>/mailrucal/view</url-pattern>
    </servlet>

    <!-- Schedule -->

    <web-resource key="schedule-soy-templates">
        <dependency>com.atlassian.soy.soy-template-plugin:soy-deps</dependency>
        <transformation extension="soy">
            <transformer key="soyTransformer"/>
        </transformation>
        <resource type="download" name="schedule-templates.soy.js" location="ru/mail/jira/plugins/calendar/schedule/schedule-templates.soy"/>
    </web-resource>

    <web-resource key="schedule-resource">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.auiplugin:aui-select</dependency>
        <dependency>com.atlassian.auiplugin:aui-select2</dependency>
        <resource type="download" name="schedule.js" location="ru/mail/jira/plugins/calendar/schedule/schedule.js" />
        <resource type="download" name="schedule.css" location="ru/mail/jira/plugins/calendar/schedule/schedule.css" />
        <context>atl.general</context>
    </web-resource>

    <webwork1 key="schedule-actions" class="java.lang.Object" roles-required="use">
        <actions>
            <action name="ru.mail.jira.plugins.calendar.schedule.MailRuCalendarCreateSchedule" alias="MailRuCalendarCreateSchedule">
                <view name="input">/ru/mail/jira/plugins/calendar/schedule/schedule.vm</view>
                <view name="securitybreach">/secure/views/securitybreach.jsp</view>
            </action>
            <action name="ru.mail.jira.plugins.calendar.schedule.MailRuCalendarEditSchedule" alias="MailRuCalendarEditSchedule">
                <view name="input">/ru/mail/jira/plugins/calendar/schedule/schedule.vm</view>
                <view name="securitybreach">/secure/views/securitybreach.jsp</view>
            </action>
            <action name="ru.mail.jira.plugins.calendar.schedule.MailRuCalendarDeleteSchedule" alias="MailRuCalendarDeleteSchedule">
                <view name="input">/ru/mail/jira/plugins/calendar/schedule/delete-schedule.vm</view>
                <view name="securitybreach">/secure/views/securitybreach.jsp</view>
            </action>
        </actions>
    </webwork1>

    <web-resource key="schedules-configuration-page-resource">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.auiplugin:aui-dropdown2</dependency>
        <dependency>ru.mail.jira.plugins.mailrucal:schedule-soy-templates</dependency>
        <resource type="download" name="schedules-configuration-page.js" location="ru/mail/jira/plugins/calendar/schedule/schedules-configuration-page.js" />
    </web-resource>

    <webwork1 key="schedules-configuration-page-action" class="java.lang.Object" roles-required="use">
        <actions>
            <action name="ru.mail.jira.plugins.calendar.schedule.MailRuCalendarSchedulesConfigurationPageAction" alias="MailRuCalendarSchedulesConfigurationPage">
                <view name="success">/ru/mail/jira/plugins/calendar/schedule/schedules-configuration-page.vm</view>
                <view name="securitybreach">/secure/views/securitybreach.jsp</view>
            </action>
        </actions>
    </webwork1>

    <web-resource key="schedules-dialog-register-resource">
        <resource type="download" name="schedule-dialog-register.js" location="ru/mail/jira/plugins/calendar/schedule/schedule-dialog-register.js" />
        <context>atl.general</context>
    </web-resource>

    <web-item key="schedule-issue" name="Schedule Issue" section="operations-operations" weight="40">
        <label key="ru.mail.jira.plugins.calendar.schedule.title"/>
        <styleClass>calendar-schedule-create</styleClass>
        <link><![CDATA[/secure/MailRuCalendarCreateSchedule!default.jspa?issueId=$issue.id]]></link>
    </web-item>

    <web-section key="calendar-user-section" location="system.user.options" weight="250">
        <label key="ru.mail.jira.plugins.calendar.linkTitleShort" />
        <condition class="com.atlassian.jira.plugin.webfragment.conditions.UserLoggedInCondition" />
    </web-section>

    <web-item key="schedule-configuration-link" section="system.user.options/calendar-user-section">
        <label key="ru.mail.jira.plugins.calendar.schedule.configuration.title" />
        <condition class="com.atlassian.jira.plugin.webfragment.conditions.UserLoggedInCondition" />
        <link>/secure/MailRuCalendarSchedulesConfigurationPage.jspa</link>
    </web-item>


    <!-- Configuration -->

    <web-section key="calendar-configuration-section" location="admin_plugins_menu">
        <label key="ru.mail.jira.plugins.calendar.configuration.section.title" />
        <condition class="com.atlassian.jira.plugin.webfragment.conditions.JiraGlobalPermissionCondition">
            <param name="permission">admin</param>
        </condition>
    </web-section>

    <web-item key="calendar-working-days-configuration-web-item" section="admin_plugins_menu/calendar-configuration-section">
        <label key="ru.mail.jira.plugins.calendar.configuration.workingDays.title" />
        <condition class="com.atlassian.jira.plugin.webfragment.conditions.JiraGlobalPermissionCondition">
            <param name="permission">admin</param>
        </condition>
        <link linkId="working-days-configuration-link">/secure/MailRuCalendarWorkingDaysConfiguration.jspa</link>
    </web-item>

    <webwork1 key="working-days-configuration-action" class="java.lang.Object" roles-required="use">
        <actions>
            <action name="ru.mail.jira.plugins.calendar.configuration.MailRuCalendarWorkingDaysConfigurationAction" alias="MailRuCalendarWorkingDaysConfiguration">
                <view name="success">/ru/mail/jira/plugins/calendar/configuration/working-days-configuration.vm</view>
            </action>
        </actions>
    </webwork1>

    <web-resource key="working-days-configuration-soy-templates">
        <dependency>com.atlassian.soy.soy-template-plugin:soy-deps</dependency>
        <transformation extension="soy">
            <transformer key="soyTransformer"/>
        </transformation>
        <resource type="download" name="working-days-configuration-templates.soy.js" location="ru/mail/jira/plugins/calendar/configuration/working-days-configuration-templates.soy"/>
    </web-resource>

    <web-resource key="working-days-configuration-resource">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>jira.webresources:calendar</dependency>
        <dependency>jira.webresources:calendar-en</dependency>
        <dependency>jira.webresources:calendar-localisation-moment</dependency>
        <dependency>ru.mail.jira.plugins.mailrucal:working-days-configuration-soy-templates</dependency>
        <resource type="download" name="working-days-configuration.js" location="/ru/mail/jira/plugins/calendar/configuration/working-days-configuration.js" />
        <resource type="download" name="non-working-day-configuration-dialog.js" location="/ru/mail/jira/plugins/calendar/configuration/non-working-day-configuration-dialog.js" />
    </web-resource>


    <!--Gantt Diagram-->

    <webwork1 key="calendar-gantt-diagram-action" class="java.lang.Object" roles-required="use">
        <actions>
            <action name="ru.mail.jira.plugins.calendar.MailRuGanttDiagramAction" alias="MailRuGanttDiagram">
                <view name="success">/ru/mail/jira/plugins/calendar/gantt/view.vm</view>
            </action>
        </actions>
    </webwork1>

    <web-resource key="gantt-resources">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.auiplugin:aui-sidebar</dependency>
        <dependency>com.atlassian.auiplugin:aui-dropdown2</dependency>
        <dependency>com.atlassian.auiplugin:dialog2</dependency>
        <dependency>com.atlassian.auiplugin:aui-inline-dialog2</dependency>
        <dependency>com.atlassian.auiplugin:aui-flag</dependency>
        <dependency>com.atlassian.auiplugin:aui-select2</dependency>
        <dependency>com.atlassian.auiplugin:aui-date-picker</dependency>
        <dependency>com.atlassian.auiplugin:aui-banner</dependency>
        <dependency>jira.webresources:jquery-livestamp</dependency>
        <dependency>com.atlassian.auiplugin:aui-experimental-tooltips</dependency>
        <dependency>jira.webresources:jqlautocomplete</dependency>
        <dependency>ru.mail.jira.plugins.mailrucal:mailru-calendar-soy-templates</dependency>

        <resource type="download" name="calendar-img/" location="ru/mail/jira/plugins/calendar/img"/>

        <resource type="download" name="moment.js" location="ru/mail/jira/plugins/calendar/fullcalendar/moment.js"/>
        <resource type="download" name="moment-timezone-with-data.js" location="ru/mail/jira/plugins/calendar/fullcalendar/moment-timezone-with-data.js"/>

        <resource type="download" name="common.css" location="ru/mail/jira/plugins/calendar/css/common.css"/>
        <resource type="download" name="gantt.css" location="ru/mail/jira/plugins/calendar/css/gantt.css"/>
        <resource type="download" name="i18n.js" location="ru/mail/jira/plugins/calendar/gantt/i18n.js"/>
        <resource type="download" name="common.js" location="ru/mail/jira/plugins/calendar/js/common.js"/>
        <resource type="download" name="common.js.map" location="ru/mail/jira/plugins/calendar/js/common.js.map"/>
        <resource type="download" name="gantt.js" location="ru/mail/jira/plugins/calendar/js/gantt.js"/>
        <resource type="download" name="gantt.js.map" location="ru/mail/jira/plugins/calendar/js/gantt.js.map"/>
    </web-resource>

    <web-resource key="gantt-old-resources">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.auiplugin:aui-sidebar</dependency>
        <dependency>com.atlassian.auiplugin:aui-dropdown2</dependency>
        <dependency>com.atlassian.auiplugin:dialog2</dependency>
        <dependency>com.atlassian.auiplugin:aui-inline-dialog2</dependency>
        <dependency>com.atlassian.auiplugin:aui-flag</dependency>
        <dependency>com.atlassian.auiplugin:aui-select2</dependency>
        <dependency>com.atlassian.auiplugin:aui-date-picker</dependency>
        <dependency>com.atlassian.auiplugin:aui-banner</dependency>
        <dependency>jira.webresources:jquery-livestamp</dependency>
        <dependency>com.atlassian.auiplugin:aui-experimental-tooltips</dependency>
        <dependency>jira.webresources:jqlautocomplete</dependency>
        <dependency>ru.mail.jira.plugins.mailrucal:mailru-calendar-soy-templates</dependency>

        <resource type="download" name="calendar-img/" location="ru/mail/jira/plugins/calendar/img"/>

        <resource type="download" name="dhtmlxgantt.css" location="ru/mail/jira/plugins/calendar/gantt/dhtmlxgantt.css"/>
        <resource type="download" name="dhtmlxgantt-min.js" location="ru/mail/jira/plugins/calendar/gantt/dhtmlxgantt-min.js"/>
        <resource type="download" name="dhtmlxgantt-min.js.map" location="ru/mail/jira/plugins/calendar/gantt/dhtmlxgantt-min.js.map"/>

        <resource type="download" name="moment.js" location="ru/mail/jira/plugins/calendar/fullcalendar/moment.js"/>
        <resource type="download" name="moment-timezone-with-data.js" location="ru/mail/jira/plugins/calendar/fullcalendar/moment-timezone-with-data.js"/>

        <resource type="download" name="view.css" location="ru/mail/jira/plugins/calendar/gantt/view.css"/>
        <resource type="download" name="view.js" location="ru/mail/jira/plugins/calendar/gantt/view.js"/>
    </web-resource>

    <web-panel key="gantt-issue-panel" location="atl.jira.view.issue.left.context" weight="401">
        <context-provider class="ru.mail.jira.plugins.calendar.web.gantt.GanttLinksContextProvider"/>

        <conditions type="AND">
            <condition class="com.atlassian.jira.plugin.webfragment.conditions.HasIssuePermissionCondition">
                <param name="permission">browse</param>
            </condition>
            <condition class="ru.mail.jira.plugins.calendar.web.gantt.HasGanttLinksCondition"/>
        </conditions>

        <label key="ru.mail.jira.plugins.calendar.gantt.issuePanel.title"/>

        <resource name="view" type="velocity" location="ru/mail/jira/plugins/calendar/gantt/issuepanel.vm"/>
    </web-panel>

    <!--Gantt Resource-->

    <webwork1 key="calendar-gantt-teams-action" class="java.lang.Object" roles-required="use">
        <actions>
            <action name="ru.mail.jira.plugins.calendar.MailRuGanttTeamsAction" alias="MailRuGanttTeams">
                <view name="success">/ru/mail/jira/plugins/calendar/gantt/teams/view.vm</view>
            </action>
        </actions>
    </webwork1>

    <web-resource key="gantt-teams-resources">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <resource type="download" name="common.css" location="ru/mail/jira/plugins/calendar/css/common.css"/>
        <resource type="download" name="common.js" location="ru/mail/jira/plugins/calendar/js/common.js"/>
        <resource type="download" name="common.js.map" location="ru/mail/jira/plugins/calendar/js/common.js.map"/>
        <resource type="download" name="teams.js" location="ru/mail/jira/plugins/calendar/js/teams.js"/>
    </web-resource>

    <!-- todo: managed-access-level? -->
    <!--Custom Fields-->
    <customfield-type
            key="calendar-issue-progress-cf"
            name="Calendar Issue Progress for Gantt"
            i18n-name-key="ru.mail.jira.plugins.calendar.cf.progress.title"
            class="ru.mail.jira.plugins.calendar.customfield.IssueProgressCFType"
    >
        <description>Calendar Issue Progress for Gantt Diagram.</description>
        <resource type="velocity" name="view" location="ru/mail/jira/plugins/calendar/cf/progress-cf-view.vm" />
        <resource type="velocity" name="edit" location="ru/mail/jira/plugins/calendar/cf/progress-cf-edit.vm" />
    </customfield-type>

    <customfield-type
            key="calendar-issue-duration-cf"
            name="Calendar Issue Duration for Gantt"
            i18n-name-key="ru.mail.jira.plugins.calendar.cf.duration.title"
            class="ru.mail.jira.plugins.calendar.customfield.IssueDurationCFType"
    >
        <description>Calendar Issue Duration for Gantt Diagram.</description>
        <resource type="velocity" name="view" location="ru/mail/jira/plugins/calendar/cf/duration-cf-view.vm" />
        <resource type="velocity" name="edit" location="ru/mail/jira/plugins/calendar/cf/duration-cf-edit.vm" />
    </customfield-type>

    <customfield-type
            key="calendar-issue-parent-cf"
            name="Calendar Issue Parent for Gantt"
            i18n-name-key="ru.mail.jira.plugins.calendar.cf.issueParent.title"
            class="ru.mail.jira.plugins.calendar.customfield.IssueParentCFType"
    >
        <description>Calendar Issue Parent for Gantt Diagram.</description>
        <resource type="velocity" name="view" location="ru/mail/jira/plugins/calendar/cf/parent-cf-view.vm" />
        <resource type="velocity" name="edit" location="ru/mail/jira/plugins/calendar/cf/parent-cf-edit.vm" />
    </customfield-type>

</atlassian-plugin>